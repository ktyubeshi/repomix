# known-issues.md

このファイルは、repomix-rust と JS 版 repomix の互換性に関する既知の差異をまとめたものです。
「JS 版と同じ結果になるはず」と期待したときに違いが出る箇所を優先して記載します。

## 互換性の既知差異

- **バイナリ判定ロジックが完全一致しない**
  - JS 版は `istextorbinary` と `jschardet` を使った判定。
  - Rust 版は拡張子リスト + `content_inspector` + NUL バイト検出 + デコード失敗判定。
  - 判定手法が異なるため、同じファイルでも含める/除外する結果が稀にずれる可能性があります。

- **エンコーディング信頼度の扱い**
  - JS 版は検出信頼度が低い場合（例: 0.2 未満）に除外します。
  - Rust 版の `chardetng` は信頼度の取得ができないため、デコード失敗時のみ除外します。
  - そのため、JS 版では除外されるが Rust 版では含まれるケースがありえます。

- **バイナリ検出ファイルの一覧表示**
  - JS 版は「バイナリとして検出され除外されたファイル一覧」を CLI に表示します。
  - Rust 版は現時点でこの一覧表示がありません（出力から除外はされます）。

- **拡張子リストの同期遅延**
  - Rust 版は `binary_extensions.rs` の固定リストで判定します。
  - JS 版の挙動と完全同期させるには定期的なリスト更新が必要で、追従遅れが起きる可能性があります。

## 期待される挙動（JS 版互換を目指す方向性）

- バイナリは **内容から除外** されるが **ディレクトリ構造には残る**
- テキストファイルは可能な限り内容が取り込まれる

差異が再現する具体的なファイルがあれば、再現サンプルと一緒に記載・共有してください。
